{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"rounded-lg border bg-card text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n))\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\n\nexport { Card, CardHeader, CardFooter, CardTitle, CardDescription, CardContent }\n"],"names":[],"mappings":";;;;;;;;;AAAA;AAEA;;;;AAEA,MAAM,qBAAO,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG1B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,4DACA;QAED,GAAG,KAAK;;;;;;AAGb,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sDACA;QAED,GAAG,KAAK;;;;;;AAGb,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGrC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGjC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QAAI,KAAK;QAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,YAAY;QAAa,GAAG,KAAK;;;;;;AAEhE,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8BAA8B;QAC3C,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 88, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/status-panel.tsx"],"sourcesContent":["'use client';\nimport type { AlertLevel } from '@/lib/types';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { ShieldCheck, AlertTriangle, Siren, ShieldOff, Bell } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { useContext } from 'react';\nimport { AppContext } from '@/context/app-context';\n\ntype StatusInfo = {\n  icon: React.ElementType;\n  label: string;\n  className: string;\n  description: string;\n};\n\nconst statusMap: Record<AlertLevel, StatusInfo> = {\n  NORMAL: {\n    icon: ShieldCheck,\n    label: 'All Clear',\n    description: 'Systems are operating normally. No threats detected.',\n    className: 'text-status-normal',\n  },\n  LOW_RISK: {\n    icon: Bell,\n    label: 'Caution Advised',\n    description: 'Slight anomalies detected. Remain aware of your surroundings.',\n    className: 'text-status-low',\n  },\n  MEDIUM_RISK: {\n    icon: AlertTriangle,\n    label: 'Potential Threat',\n    description: 'Potential distress signals identified. System is on high alert.',\n    className: 'text-status-medium animate-pulse',\n  },\n  HIGH_RISK: {\n    icon: Siren,\n    label: 'High Alert',\n    description: 'Multiple distress indicators confirmed. Escalation may be required.',\n    className: 'text-status-high animate-pulse [animation-duration:1s]',\n  },\n  EMERGENCY: {\n    icon: ShieldOff,\n    label: 'SOS Broadcast',\n    description: 'Emergency protocol initiated. Your contacts are being notified.',\n    className: 'text-status-emergency',\n  },\n};\n\nexport function StatusPanel({ alertLevel }: { alertLevel: AlertLevel }) {\n  const { isMonitoring } = useContext(AppContext);\n  \n  if (!isMonitoring) {\n    return (\n        <Card className=\"w-full border-secondary/20 bg-card shadow-xl\">\n            <CardContent className=\"flex flex-col items-center justify-center p-6 text-center md:p-10\">\n                <div className=\"rounded-full bg-secondary/30 p-3 md:p-4\">\n                    <ShieldOff className=\"h-16 w-16 text-muted-foreground md:h-20 md:w-20\" />\n                </div>\n                <h1 className=\"mt-4 font-headline text-3xl font-bold tracking-tighter text-muted-foreground md:text-5xl\">\n                    Monitoring Off\n                </h1>\n                <p className=\"mt-2 max-w-xl text-sm text-muted-foreground md:text-base\">\n                    Real-time threat analysis is currently disabled. Turn on monitoring to activate protection.\n                </p>\n            </CardContent>\n        </Card>\n    );\n  }\n\n  const { icon: Icon, label, description, className } = statusMap[alertLevel];\n\n  return (\n    <Card className={cn(\n        \"w-full border-secondary/20 bg-card shadow-xl transition-all duration-500\", \n        alertLevel === 'EMERGENCY' ? 'border-status-emergency/50 bg-status-emergency/10' : ''\n    )}>\n      <CardContent className=\"flex flex-col items-center justify-center p-6 text-center md:p-10\">\n        <div className=\"relative\">\n            {alertLevel === 'EMERGENCY' && <div className=\"absolute h-full w-full animate-ping rounded-full bg-status-emergency/50\"></div>}\n            <div className={cn('relative z-10 rounded-full bg-secondary/30 p-3 md:p-4 transition-all', {'bg-status-emergency/20': alertLevel === 'EMERGENCY'})}>\n                <Icon className={cn('h-16 w-16 transition-colors md:h-20 md:w-20', className)} />\n            </div>\n        </div>\n        <h1 className={cn('mt-4 font-headline text-3xl font-bold tracking-tighter transition-colors md:text-5xl', className)}>\n          {label}\n        </h1>\n        <p className=\"mt-2 max-w-xl text-sm text-muted-foreground md:text-base\">{description}</p>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AANA;;;;;;;AAeA,MAAM,YAA4C;IAChD,QAAQ;QACN,MAAM,oNAAA,CAAA,cAAW;QACjB,OAAO;QACP,aAAa;QACb,WAAW;IACb;IACA,UAAU;QACR,MAAM,kMAAA,CAAA,OAAI;QACV,OAAO;QACP,aAAa;QACb,WAAW;IACb;IACA,aAAa;QACX,MAAM,wNAAA,CAAA,gBAAa;QACnB,OAAO;QACP,aAAa;QACb,WAAW;IACb;IACA,WAAW;QACT,MAAM,oMAAA,CAAA,QAAK;QACX,OAAO;QACP,aAAa;QACb,WAAW;IACb;IACA,WAAW;QACT,MAAM,gNAAA,CAAA,YAAS;QACf,OAAO;QACP,aAAa;QACb,WAAW;IACb;AACF;AAEO,SAAS,YAAY,EAAE,UAAU,EAA8B;IACpE,MAAM,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE,iIAAA,CAAA,aAAU;IAE9C,IAAI,CAAC,cAAc;QACjB,qBACI,8OAAC,gIAAA,CAAA,OAAI;YAAC,WAAU;sBACZ,cAAA,8OAAC,gIAAA,CAAA,cAAW;gBAAC,WAAU;;kCACnB,8OAAC;wBAAI,WAAU;kCACX,cAAA,8OAAC,gNAAA,CAAA,YAAS;4BAAC,WAAU;;;;;;;;;;;kCAEzB,8OAAC;wBAAG,WAAU;kCAA2F;;;;;;kCAGzG,8OAAC;wBAAE,WAAU;kCAA2D;;;;;;;;;;;;;;;;;IAMtF;IAEA,MAAM,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,GAAG,SAAS,CAAC,WAAW;IAE3E,qBACE,8OAAC,gIAAA,CAAA,OAAI;QAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACd,4EACA,eAAe,cAAc,sDAAsD;kBAErF,cAAA,8OAAC,gIAAA,CAAA,cAAW;YAAC,WAAU;;8BACrB,8OAAC;oBAAI,WAAU;;wBACV,eAAe,6BAAe,8OAAC;4BAAI,WAAU;;;;;;sCAC9C,8OAAC;4BAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,wEAAwE;gCAAC,0BAA0B,eAAe;4BAAW;sCAC5I,cAAA,8OAAC;gCAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,+CAA+C;;;;;;;;;;;;;;;;;8BAG3E,8OAAC;oBAAG,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,wFAAwF;8BACvG;;;;;;8BAEH,8OAAC;oBAAE,WAAU;8BAA4D;;;;;;;;;;;;;;;;;AAIjF","debugId":null}},
    {"offset": {"line": 262, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/sensor-card.tsx"],"sourcesContent":["'use client';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { cn } from '@/lib/utils';\nimport type { AlertLevel } from '@/lib/types';\n\ninterface SensorCardProps {\n  icon: React.ElementType;\n  name: string;\n  statusText: string;\n  isActive: boolean;\n  alertLevel: AlertLevel;\n}\n\nexport function SensorCard({ icon: Icon, name, statusText, isActive, alertLevel }: SensorCardProps) {\n    \n  const getStatusColor = () => {\n    if (!isActive) return 'bg-muted-foreground';\n    switch (alertLevel) {\n        case 'NORMAL': return 'bg-status-normal';\n        case 'LOW_RISK': return 'bg-status-low';\n        case 'MEDIUM_RISK': return 'bg-status-medium animate-pulse';\n        case 'HIGH_RISK': return 'bg-status-high animate-pulse';\n        case 'EMERGENCY': return 'bg-status-emergency animate-ping';\n        default: return 'bg-status-normal';\n    }\n  }\n\n  return (\n    <Card className=\"border-secondary/20 bg-card shadow-md transition-all hover:border-accent\">\n      <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n        <CardTitle className=\"text-base font-medium font-headline\">{name}</CardTitle>\n        <Icon className=\"h-5 w-5 text-muted-foreground\" />\n      </CardHeader>\n      <CardContent>\n        <div className=\"flex items-center space-x-2\">\n          <div className=\"relative flex h-3 w-3\">\n            <span className={cn('absolute inline-flex h-full w-full rounded-full opacity-75', getStatusColor())} />\n            <span className={cn('relative inline-flex h-3 w-3 rounded-full', getStatusColor().split(' ')[0])} />\n          </div>\n          <p className=\"text-sm text-muted-foreground\">{isActive ? statusText : 'Inactive'}</p>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AACA;AACA;AAFA;;;;AAaO,SAAS,WAAW,EAAE,MAAM,IAAI,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAmB;IAEhG,MAAM,iBAAiB;QACrB,IAAI,CAAC,UAAU,OAAO;QACtB,OAAQ;YACJ,KAAK;gBAAU,OAAO;YACtB,KAAK;gBAAY,OAAO;YACxB,KAAK;gBAAe,OAAO;YAC3B,KAAK;gBAAa,OAAO;YACzB,KAAK;gBAAa,OAAO;YACzB;gBAAS,OAAO;QACpB;IACF;IAEA,qBACE,8OAAC,gIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,8OAAC,gIAAA,CAAA,aAAU;gBAAC,WAAU;;kCACpB,8OAAC,gIAAA,CAAA,YAAS;wBAAC,WAAU;kCAAuC;;;;;;kCAC5D,8OAAC;wBAAK,WAAU;;;;;;;;;;;;0BAElB,8OAAC,gIAAA,CAAA,cAAW;0BACV,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;;8CACb,8OAAC;oCAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,8DAA8D;;;;;;8CAClF,8OAAC;oCAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,6CAA6C,iBAAiB,KAAK,CAAC,IAAI,CAAC,EAAE;;;;;;;;;;;;sCAEjG,8OAAC;4BAAE,WAAU;sCAAiC,WAAW,aAAa;;;;;;;;;;;;;;;;;;;;;;;AAKhF","debugId":null}},
    {"offset": {"line": 376, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/sensor-status.tsx"],"sourcesContent":["'use client';\nimport { Video, MapPin, PersonStanding, Mic } from 'lucide-react';\nimport { SensorCard } from './sensor-card';\nimport type { AlertLevel } from '@/lib/types';\nimport { useState, useEffect, useContext } from 'react';\nimport { AppContext } from '@/context/app-context';\n\nconst sensorStatusMap: Record<AlertLevel, Record<string, string>> = {\n    NORMAL: {\n        Audio: 'Monitoring Ambient Sound',\n        Vision: 'Analyzing Surroundings',\n        Location: 'Establishing Geofence',\n        Motion: 'Calibrating Gyroscope'\n    },\n    LOW_RISK: {\n        Audio: 'Elevated Voice Detected',\n        Vision: 'Unusual Motion Detected',\n        Location: 'High-Traffic Area',\n        Motion: 'Irregular Movement'\n    },\n    MEDIUM_RISK: {\n        Audio: 'Possible Distress Keywords',\n        Vision: 'Face Occlusion Detected',\n        Location: 'Entering Risky Area',\n        Motion: 'Sudden Stop Detected'\n    },\n    HIGH_RISK: {\n        Audio: 'Scream Detected',\n        Vision: 'Fall Detected',\n        Location: 'Known Incident Hotspot',\n        Motion: 'Erratic Motion Detected'\n    },\n    EMERGENCY: {\n        Audio: 'Continuous Distress Signal',\n        Vision: 'User Unresponsive',\n        Location: 'Last Known Coordinates',\n        Motion: 'No Movement'\n    }\n}\n\nexport function SensorStatus({ alertLevel }: { alertLevel: AlertLevel }) {\n  const { isMonitoring } = useContext(AppContext);\n  const [hasPermission, setHasPermission] = useState({\n    audio: false,\n    vision: false,\n    location: false,\n    motion: false,\n  });\n\n  useEffect(() => {\n    if (!isMonitoring) {\n        setHasPermission({ audio: false, vision: false, location: false, motion: false });\n        return;\n    }\n\n    navigator.mediaDevices.enumerateDevices().then(devices => {\n      const audio = devices.some(d => d.kind === 'audioinput' && d.label);\n      const video = devices.some(d => d.kind === 'videoinput' && d.label);\n      setHasPermission(prev => ({...prev, audio, vision: video}));\n    });\n\n    navigator.permissions.query({name:'geolocation'}).then(permissionStatus => {\n        setHasPermission(prev => ({...prev, location: permissionStatus.state === 'granted'}));\n        permissionStatus.onchange = () => {\n            setHasPermission(prev => ({...prev, location: permissionStatus.state === 'granted'}));\n        }\n    });\n\n    if (typeof (DeviceMotionEvent as any).requestPermission === 'function') {\n      (DeviceMotionEvent as any).requestPermission()\n        .then((permissionState: string) => {\n          if (permissionState === 'granted') {\n            setHasPermission(prev => ({...prev, motion: true}));\n          }\n        })\n    } else {\n        window.addEventListener('devicemotion', () => setHasPermission(prev => ({...prev, motion: true})), {once: true});\n    }\n\n  }, [isMonitoring]);\n  \n  const statuses = sensorStatusMap[alertLevel];\n\n  return (\n    <div className=\"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-4\">\n      <SensorCard\n        name=\"Audio Monitoring\"\n        icon={Mic}\n        isActive={isMonitoring && hasPermission.audio}\n        statusText={statuses.Audio}\n        alertLevel={alertLevel}\n      />\n      <SensorCard\n        name=\"Vision Detection\"\n        icon={Video}\n        isActive={isMonitoring && hasPermission.vision}\n        statusText={statuses.Vision}\n        alertLevel={alertLevel}\n      />\n       <SensorCard\n        name=\"Motion Analysis\"\n        icon={PersonStanding}\n        isActive={isMonitoring && hasPermission.motion}\n        statusText={statuses.Motion}\n        alertLevel={alertLevel}\n      />\n      <SensorCard\n        name=\"Location Context\"\n        icon={MapPin}\n        isActive={isMonitoring && hasPermission.location}\n        statusText={statuses.Location}\n        alertLevel={alertLevel}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 547, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/skeleton.tsx"],"sourcesContent":["import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n"],"names":[],"mappings":";;;;AAAA;;;AAEA,SAAS,SAAS,EAChB,SAAS,EACT,GAAG,OACkC;IACrC,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,qCAAqC;QAClD,GAAG,KAAK;;;;;;AAGf","debugId":null}},
    {"offset": {"line": 571, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/risk-assessment.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Globe, Clock, ShieldAlert } from 'lucide-react';\nimport { Skeleton } from '@/components/ui/skeleton';\nimport { cn } from '@/lib/utils';\nimport type { AlertLevel } from '@/lib/types';\n\ninterface RiskAssessmentProps {\n    alertLevel: AlertLevel;\n    setAlertLevel: (level: AlertLevel) => void;\n}\n\nexport function RiskAssessment({ alertLevel, setAlertLevel }: RiskAssessmentProps) {\n  const [location, setLocation] = useState<string | null>(null);\n  const [time, setTime] = useState<string>('--:--:--');\n  const [riskScore, setRiskScore] = useState<number>(0);\n\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        (position) => {\n          const { latitude, longitude } = position.coords;\n          setLocation(`${latitude.toFixed(2)}°, ${longitude.toFixed(2)}°`);\n        },\n        () => {\n          setLocation('Permission Denied');\n        }\n      );\n    } else {\n      setLocation('Not Supported');\n    }\n\n    const intervalId = setInterval(() => {\n      const now = new Date();\n      setTime(now.toLocaleTimeString());\n      \n      const hour = now.getHours();\n      let score = 20;\n      if (hour < 6 || hour > 22) { // increased night-time hours\n        score += 40;\n      }\n      if (location && (location === 'Permission Denied' || location === 'Not Supported')) {\n        score += 15;\n      }\n      const newRiskScore = Math.min(100, score);\n      setRiskScore(newRiskScore);\n\n      if (alertLevel !== 'EMERGENCY' && alertLevel !== 'HIGH_RISK') {\n        if (newRiskScore > 75) {\n            setAlertLevel('MEDIUM_RISK');\n        } else if (newRiskScore > 40) {\n            setAlertLevel('LOW_RISK');\n        } else {\n            setAlertLevel('NORMAL');\n        }\n      }\n\n    }, 1000);\n\n    return () => clearInterval(intervalId);\n  }, [location, setAlertLevel, alertLevel]);\n\n  const getRiskColor = (score: number) => {\n    if (score > 75) return 'text-status-high';\n    if (score > 50) return 'text-status-medium';\n    if (score > 25) return 'text-status-low';\n    return 'text-status-normal';\n  };\n\n  return (\n    <Card className=\"border-secondary/20 bg-card shadow-md h-full\">\n      <CardHeader>\n        <CardTitle className=\"font-headline text-lg\">Contextual Risk</CardTitle>\n      </CardHeader>\n      <CardContent className=\"space-y-4 text-sm\">\n        <div className=\"flex items-center\">\n          <Globe className=\"mr-3 h-5 w-5 text-muted-foreground\" />\n          <span className=\"font-medium\">Location:</span>\n          {location ? <span className=\"ml-2 font-mono\">{location}</span> : <Skeleton className=\"ml-2 h-4 w-24\" />}\n        </div>\n        <div className=\"flex items-center\">\n          <Clock className=\"mr-3 h-5 w-5 text-muted-foreground\" />\n          <span className=\"font-medium\">Time:</span>\n          <span className=\"ml-2 font-mono\">{time}</span>\n        </div>\n        <div className=\"flex items-center\">\n          <ShieldAlert className=\"mr-3 h-5 w-5 text-muted-foreground\" />\n          <span className=\"font-medium\">Dynamic Risk:</span>\n          <span className={cn('ml-2 font-bold font-mono text-base', getRiskColor(riskScore))}>{riskScore} / 100</span>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;AAAA;AACA;AACA;AANA;;;;;;;AAcO,SAAS,eAAe,EAAE,UAAU,EAAE,aAAa,EAAuB;IAC/E,MAAM,CAAC,UAAU,YAAY,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAiB;IACxD,MAAM,CAAC,MAAM,QAAQ,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IACzC,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAU;IAEnD,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,IAAI,UAAU,WAAW,EAAE;YACzB,UAAU,WAAW,CAAC,kBAAkB,CACtC,CAAC;gBACC,MAAM,EAAE,QAAQ,EAAE,SAAS,EAAE,GAAG,SAAS,MAAM;gBAC/C,YAAY,GAAG,SAAS,OAAO,CAAC,GAAG,GAAG,EAAE,UAAU,OAAO,CAAC,GAAG,CAAC,CAAC;YACjE,GACA;gBACE,YAAY;YACd;QAEJ,OAAO;YACL,YAAY;QACd;QAEA,MAAM,aAAa,YAAY;YAC7B,MAAM,MAAM,IAAI;YAChB,QAAQ,IAAI,kBAAkB;YAE9B,MAAM,OAAO,IAAI,QAAQ;YACzB,IAAI,QAAQ;YACZ,IAAI,OAAO,KAAK,OAAO,IAAI;gBACzB,SAAS;YACX;YACA,IAAI,YAAY,CAAC,aAAa,uBAAuB,aAAa,eAAe,GAAG;gBAClF,SAAS;YACX;YACA,MAAM,eAAe,KAAK,GAAG,CAAC,KAAK;YACnC,aAAa;YAEb,IAAI,eAAe,eAAe,eAAe,aAAa;gBAC5D,IAAI,eAAe,IAAI;oBACnB,cAAc;gBAClB,OAAO,IAAI,eAAe,IAAI;oBAC1B,cAAc;gBAClB,OAAO;oBACH,cAAc;gBAClB;YACF;QAEF,GAAG;QAEH,OAAO,IAAM,cAAc;IAC7B,GAAG;QAAC;QAAU;QAAe;KAAW;IAExC,MAAM,eAAe,CAAC;QACpB,IAAI,QAAQ,IAAI,OAAO;QACvB,IAAI,QAAQ,IAAI,OAAO;QACvB,IAAI,QAAQ,IAAI,OAAO;QACvB,OAAO;IACT;IAEA,qBACE,8OAAC,gIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,8OAAC,gIAAA,CAAA,aAAU;0BACT,cAAA,8OAAC,gIAAA,CAAA,YAAS;oBAAC,WAAU;8BAAwB;;;;;;;;;;;0BAE/C,8OAAC,gIAAA,CAAA,cAAW;gBAAC,WAAU;;kCACrB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,oMAAA,CAAA,QAAK;gCAAC,WAAU;;;;;;0CACjB,8OAAC;gCAAK,WAAU;0CAAc;;;;;;4BAC7B,yBAAW,8OAAC;gCAAK,WAAU;0CAAkB;;;;;qDAAmB,8OAAC,oIAAA,CAAA,WAAQ;gCAAC,WAAU;;;;;;;;;;;;kCAEvF,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,oMAAA,CAAA,QAAK;gCAAC,WAAU;;;;;;0CACjB,8OAAC;gCAAK,WAAU;0CAAc;;;;;;0CAC9B,8OAAC;gCAAK,WAAU;0CAAkB;;;;;;;;;;;;kCAEpC,8OAAC;wBAAI,WAAU;;0CACb,8OAAC,oNAAA,CAAA,cAAW;gCAAC,WAAU;;;;;;0CACvB,8OAAC;gCAAK,WAAU;0CAAc;;;;;;0CAC9B,8OAAC;gCAAK,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,sCAAsC,aAAa;;oCAAc;oCAAU;;;;;;;;;;;;;;;;;;;;;;;;;AAKzG","debugId":null}},
    {"offset": {"line": 783, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;AAAA;AACA;AACA;AAEA;;;;;;AAEA,MAAM,iBAAiB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACvB,4VACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC5B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IACxD,MAAM,OAAO,UAAU,gKAAA,CAAA,OAAI,GAAG;IAC9B,qBACE,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,OAAO,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 843, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/emergency-panel.tsx"],"sourcesContent":["'use client';\nimport type { AlertLevel } from '@/lib/types';\nimport { Button } from '@/components/ui/button';\nimport { PhoneForwarded, ShieldQuestion, Siren } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\nexport function EmergencyPanel({ alertLevel, onManualTrigger }: { alertLevel: AlertLevel, onManualTrigger: () => void }) {\n  const isEmergency = alertLevel === 'EMERGENCY';\n\n  return (\n    <div className={cn(\n        \"mt-6 flex flex-col items-center justify-center rounded-lg border-2 border-dashed border-secondary/20 p-6 text-center transition-all md:p-8\",\n        isEmergency ? \"border-status-emergency/40 bg-status-emergency/10\" : \"\"\n    )}>\n      {isEmergency ? (\n        <>\n          <div className=\"flex h-16 w-16 items-center justify-center rounded-full bg-status-emergency/20\">\n            <PhoneForwarded className=\"h-8 w-8 text-status-emergency\" />\n          </div>\n          <h3 className=\"mt-4 font-headline text-xl font-bold text-status-emergency md:text-2xl\">Emergency Alert Sent</h3>\n          <p className=\"mt-2 max-w-md text-sm text-muted-foreground md:text-base\">\n            Your emergency contacts have been notified with your current location and status. Help is on the way.\n          </p>\n        </>\n      ) : (\n        <>\n          <div className=\"flex h-14 w-14 items-center justify-center rounded-full bg-secondary/20 md:h-16 md:w-16\">\n            <ShieldQuestion className=\"h-7 w-7 text-primary md:h-8 md:w-8\" />\n          </div>\n          <h3 className=\"mt-4 font-headline text-xl font-bold md:text-2xl\">Need Immediate Help?</h3>\n          <p className=\"mt-2 max-w-md text-sm text-muted-foreground md:text-base\">\n            If you are in danger, you can manually trigger an emergency alert. This will immediately notify your emergency contacts and local authorities.\n          </p>\n          <Button onClick={onManualTrigger} variant=\"destructive\" size=\"lg\" className=\"mt-6 font-bold\">\n            <Siren className=\"mr-2 h-5 w-5\" />\n            TRIGGER MANUAL SOS\n          </Button>\n        </>\n      )}\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AAAA;AAAA;AACA;AAJA;;;;;AAMO,SAAS,eAAe,EAAE,UAAU,EAAE,eAAe,EAA2D;IACrH,MAAM,cAAc,eAAe;IAEnC,qBACE,8OAAC;QAAI,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACb,8IACA,cAAc,sDAAsD;kBAErE,4BACC;;8BACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,0NAAA,CAAA,iBAAc;wBAAC,WAAU;;;;;;;;;;;8BAE5B,8OAAC;oBAAG,WAAU;8BAAyE;;;;;;8BACvF,8OAAC;oBAAE,WAAU;8BAA2D;;;;;;;yCAK1E;;8BACE,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,0NAAA,CAAA,iBAAc;wBAAC,WAAU;;;;;;;;;;;8BAE5B,8OAAC;oBAAG,WAAU;8BAAmD;;;;;;8BACjE,8OAAC;oBAAE,WAAU;8BAA2D;;;;;;8BAGxE,8OAAC,kIAAA,CAAA,SAAM;oBAAC,SAAS;oBAAiB,SAAQ;oBAAc,MAAK;oBAAK,WAAU;;sCAC1E,8OAAC,oMAAA,CAAA,QAAK;4BAAC,WAAU;;;;;;wBAAiB;;;;;;;;;;;;;;AAO9C","debugId":null}},
    {"offset": {"line": 960, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n"],"names":[],"mappings":";;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,6JACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;QACJ;IACF;IACA,iBAAiB;QACf,SAAS;IACX;AACF;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG3B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,GAAG,OAAO,EAAE,oBACnC,8OAAC;QACC,KAAK;QACL,MAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;YAAE;QAAQ,IAAI;QACzC,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG;AAEpB,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,gDAAgD;QAC7D,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG;AAEzB,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC;QACC,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 1024, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/analyze-video-frame.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview This file defines a Genkit flow for analyzing a video frame for signs of distress.\n *\n * The flow takes an image data URI, and analyzes it for emotional distress or haphazard movement.\n * @interface AnalyzeVideoFrameInput - Input interface for the analyzeVideoFrame function.\n * @interface AnalyzeVideoFrameOutput - Output interface for the analyzeVideoFrame function.\n * @function analyzeVideoFrame - The main function to analyze a video frame.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst AnalyzeVideoFrameInputSchema = z.object({\n  frameDataUri: z\n    .string()\n    .describe(\n      \"A video frame image as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'.\"\n    ),\n});\nexport type AnalyzeVideoFrameInput = z.infer<typeof AnalyzeVideoFrameInputSchema>;\n\nconst AnalyzeVideoFrameOutputSchema = z.object({\n  isHaphazardMovement: z\n    .boolean()\n    .describe('Whether or not the frame contains sudden, erratic, or haphazard movements that could indicate a struggle or fall.'),\n  detectedEmotion: z\n    .enum(['anger', 'fear', 'sadness', 'joy', 'surprise', 'disgust', 'neutral'])\n    .describe('The dominant emotion detected from facial expressions in the frame. If no face is detected, return neutral.'),\n});\nexport type AnalyzeVideoFrameOutput = z.infer<typeof AnalyzeVideoFrameOutputSchema>;\n\nexport async function analyzeVideoFrame(input: AnalyzeVideoFrameInput): Promise<AnalyzeVideoFrameOutput> {\n  return analyzeVideoFrameFlow(input);\n}\n\nconst analyzeVideoFramePrompt = ai.definePrompt({\n  name: 'analyzeVideoFramePrompt',\n  input: {schema: AnalyzeVideoFrameInputSchema},\n  output: {schema: AnalyzeVideoFrameOutputSchema},\n  prompt: `You are a security expert analyzing a video frame for signs of distress.\n  \nAnalyze the following image for:\n1.  **Haphazard Movement**: Determine if the subject's posture or the scene suggests a sudden, uncontrolled movement, like a fall, a struggle, or erratic action. Set 'isHaphazardMovement' to true if detected.\n2.  **Emotion**: Analyze the facial expression of any person in the frame. Identify the dominant emotion. If multiple people are present, focus on the one showing the most distress. If no face is visible, default to 'neutral'.\n\nImage: {{media url=frameDataUri}}`,\n});\n\nconst analyzeVideoFrameFlow = ai.defineFlow(\n  {\n    name: 'analyzeVideoFrameFlow',\n    inputSchema: AnalyzeVideoFrameInputSchema,\n    outputSchema: AnalyzeVideoFrameOutputSchema,\n  },\n  async input => {\n    try {\n      const {output} = await analyzeVideoFramePrompt(input);\n      return output!;\n    } catch(e) {\n      console.error(\"Error analyzing video frame: \", e);\n      // In case of an error, assume no threat.\n      return { isHaphazardMovement: false, detectedEmotion: 'neutral' };\n    }\n  }\n);\n"],"names":[],"mappings":";;;;;;IAiCsB,oBAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 1037, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/camera-feed.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef, useContext } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle, CardFooter } from '@/components/ui/card';\nimport { Alert, AlertDescription, AlertTitle } from '@/components/ui/alert';\nimport { useToast } from '@/hooks/use-toast';\nimport { Video, Bot, PersonStanding, Smile, Frown, ShieldOff } from 'lucide-react';\nimport type { AlertLevel } from '@/lib/types';\nimport { analyzeVideoFrame } from '@/ai/flows/analyze-video-frame';\nimport { cn } from '@/lib/utils';\nimport { AppContext } from '@/context/app-context';\n\nconst FRAME_CAPTURE_INTERVAL = 500; // 0.5 seconds\nconst THREAT_COOLDOWN = 10000; // 10 seconds\n\ninterface CameraFeedProps {\n  alertLevel: AlertLevel;\n  setAlertLevel: (level: AlertLevel) => void;\n}\n\nexport function CameraFeed({ alertLevel, setAlertLevel }: CameraFeedProps) {\n  const { isMonitoring } = useContext(AppContext);\n  const [hasCameraPermission, setHasCameraPermission] = useState<boolean | null>(null);\n  const [isAnalyzing, setIsAnalyzing] = useState(false);\n  const [detectedEmotion, setDetectedEmotion] = useState('neutral');\n  const [haphazardMovement, setHaphazardMovement] = useState(false);\n  \n  const videoRef = useRef<HTMLVideoElement>(null);\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n  const lastThreatTimeRef = useRef<number>(0);\n  const intervalRef = useRef<NodeJS.Timeout>();\n\n  const { toast } = useToast();\n  \n  const stopCamera = () => {\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop());\n        streamRef.current = null;\n      }\n      if (videoRef.current) {\n        videoRef.current.srcObject = null;\n      }\n      if(intervalRef.current) {\n        clearInterval(intervalRef.current);\n        intervalRef.current = undefined;\n      }\n      setHasCameraPermission(null);\n  }\n\n  useEffect(() => {\n    const getCameraPermission = async () => {\n      if (!isMonitoring) {\n        stopCamera();\n        return;\n      }\n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ video: true });\n        streamRef.current = stream;\n        setHasCameraPermission(true);\n\n        if (videoRef.current) {\n          videoRef.current.srcObject = stream;\n        }\n      } catch (error) {\n        console.error('Error accessing camera:', error);\n        setHasCameraPermission(false);\n        toast({\n          variant: 'destructive',\n          title: 'Camera Access Denied',\n          description: 'Please enable camera permissions to use the live feed.',\n        });\n      }\n    };\n\n    getCameraPermission();\n\n    return () => {\n      stopCamera();\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isMonitoring, toast]);\n\n  useEffect(() => {\n    const analyzeFrame = async () => {\n      if (!isMonitoring || isAnalyzing || !videoRef.current || !canvasRef.current || videoRef.current.paused || videoRef.current.ended) {\n        return;\n      }\n\n      setIsAnalyzing(true);\n      const video = videoRef.current;\n      const canvas = canvasRef.current;\n      canvas.width = video.videoWidth;\n      canvas.height = video.videoHeight;\n      const context = canvas.getContext('2d');\n      if(context) {\n        context.drawImage(video, 0, 0, canvas.width, canvas.height);\n        const frameDataUri = canvas.toDataURL('image/jpeg');\n\n        try {\n          const result = await analyzeVideoFrame({ frameDataUri });\n          setDetectedEmotion(result.detectedEmotion);\n          setHaphazardMovement(result.isHaphazardMovement);\n\n          const now = Date.now();\n          if (now - lastThreatTimeRef.current > THREAT_COOLDOWN) {\n            if (result.isHaphazardMovement || result.detectedEmotion === 'fear' || result.detectedEmotion === 'anger') {\n              lastThreatTimeRef.current = now;\n              setAlertLevel('HIGH_RISK');\n            }\n          }\n        } catch (error) {\n          console.error('Frame analysis failed:', error);\n        }\n      }\n\n      setIsAnalyzing(false);\n    };\n\n    if (hasCameraPermission && isMonitoring) {\n      intervalRef.current = setInterval(analyzeFrame, FRAME_CAPTURE_INTERVAL);\n    } else {\n        if(intervalRef.current) clearInterval(intervalRef.current);\n    }\n    \n    return () => {\n        if(intervalRef.current) clearInterval(intervalRef.current);\n    }\n\n  }, [hasCameraPermission, isAnalyzing, setAlertLevel, isMonitoring]);\n\n  const EmotionIcon = detectedEmotion === 'fear' || detectedEmotion === 'anger' || detectedEmotion === 'sadness' ? Frown : Smile;\n  const isThreatDetected = haphazardMovement || detectedEmotion === 'fear' || detectedEmotion === 'anger' || detectedEmotion === 'sadness';\n\n  return (\n    <Card className=\"border-secondary/20 bg-card shadow-md flex flex-col\">\n      <CardHeader className=\"flex flex-row items-start justify-between\">\n        <CardTitle className=\"font-headline text-lg flex items-center gap-2\">\n          <Video className=\"h-5 w-5\" /> Live Feed\n        </CardTitle>\n        {isMonitoring && hasCameraPermission && (\n            <div className={cn(\"flex items-center gap-1 text-xs px-2 py-1 rounded-full\", isAnalyzing ? \"bg-blue-500/20 text-blue-300\" : \"bg-secondary\")}>\n                <Bot className=\"h-3 w-3\"/>\n                <span>{isAnalyzing ? 'Analyzing...' : 'Monitoring'}</span>\n            </div>\n        )}\n      </CardHeader>\n      <CardContent className=\"flex-grow flex flex-col\">\n        <div className=\"aspect-video w-full overflow-hidden rounded-md bg-muted flex-grow relative\">\n          <video ref={videoRef} className=\"h-full w-full object-cover\" autoPlay muted playsInline />\n          <canvas ref={canvasRef} className=\"hidden\" />\n          {!isMonitoring ? (\n             <div className=\"absolute inset-0 flex flex-col items-center justify-center p-4 bg-background/80\">\n                <ShieldOff className=\"w-10 h-10 mb-2 text-muted-foreground\" />\n                <p className=\"text-muted-foreground text-center\">Monitoring is turned off.</p>\n            </div>\n          ) : hasCameraPermission === false && (\n            <div className=\"absolute inset-0 flex items-center justify-center p-4\">\n              <Alert variant=\"destructive\">\n                <AlertTitle>Camera Access Required</AlertTitle>\n                <AlertDescription>\n                  Please allow camera access to use this feature.\n                </AlertDescription>\n              </Alert>\n            </div>\n          )}\n        </div>\n      </CardContent>\n      <CardFooter className=\"grid grid-cols-2 gap-2 text-xs pt-4 sm:gap-4\">\n        <div className=\"flex items-center gap-2\">\n            <PersonStanding className={cn(\"h-4 w-4\", haphazardMovement && isMonitoring ? 'text-status-high' : 'text-muted-foreground')} />\n            <span className=\"text-muted-foreground\">Movement:</span>\n            <span className={cn(\"font-semibold\", haphazardMovement && isMonitoring ? 'text-status-high' : 'text-foreground')}>{isMonitoring && haphazardMovement ? 'Erratic' : 'Normal'}</span>\n        </div>\n        <div className=\"flex items-center gap-2\">\n            <EmotionIcon className={cn(\"h-4 w-4\", isThreatDetected && isMonitoring ? 'text-status-high' : 'text-muted-foreground')} />\n            <span className=\"text-muted-foreground\">Emotion:</span>\n            <span className={cn(\"font-semibold capitalize\", isThreatDetected && isMonitoring ? 'text-status-high' : 'text-foreground')}>{isMonitoring ? detectedEmotion : 'N/A'}</span>\n        </div>\n      </CardFooter>\n    </Card>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1401, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/ai/flows/analyze-audio-for-distress.ts"],"sourcesContent":["'use server';\n\n/**\n * @fileOverview This file defines a Genkit flow for analyzing audio for signs of distress.\n *\n * The flow takes audio data, transcribes it, and analyzes the text for distress signals.\n * @interface AnalyzeAudioForDistressInput - Input interface for the analyzeAudioForDistress function.\n * @interface AnalyzeAudioForDistressOutput - Output interface for the analyzeAudioForDistress function.\n * @function analyzeAudioForDistress - The main function to analyze audio.\n */\n\nimport {ai} from '@/ai/genkit';\nimport {z} from 'genkit';\n\nconst AnalyzeAudioForDistressInputSchema = z.object({\n  audioDataUri: z\n    .string()\n    .describe(\n      \"A chunk of audio as a data URI that must include a MIME type and use Base64 encoding. Expected format: 'data:<mimetype>;base64,<encoded_data>'.\"\n    ),\n});\nexport type AnalyzeAudioForDistressInput = z.infer<typeof AnalyzeAudioForDistressInputSchema>;\n\nconst AnalyzeAudioForDistressOutputSchema = z.object({\n  isDistress: z\n    .boolean()\n    .describe('Whether or not the audio contains signs of distress, such as screaming, fear, or urgent pleas for help.'),\n});\nexport type AnalyzeAudioForDistressOutput = z.infer<typeof AnalyzeAudioForDistressOutputSchema>;\n\nexport async function analyzeAudioForDistress(input: AnalyzeAudioForDistressInput): Promise<AnalyzeAudioForDistressOutput> {\n  return analyzeAudioForDistressFlow(input);\n}\n\nconst analyzeAudioPrompt = ai.definePrompt({\n  name: 'analyzeAudioPrompt',\n  input: {schema: AnalyzeAudioForDistressInputSchema},\n  output: {schema: AnalyzeAudioForDistressOutputSchema},\n  prompt: `You are a security expert trained to detect signs of distress in audio.\n  \nTranscribe the following audio and analyze the transcription. Determine if the content contains signs of distress.\nThis could include screaming, phrases of fear, urgent pleas for help, or other indicators that the person is in danger.\n\nSet isDistress to true if distress is detected.\n\nAudio: {{media url=audioDataUri}}`,\n});\n\nconst analyzeAudioForDistressFlow = ai.defineFlow(\n  {\n    name: 'analyzeAudioForDistressFlow',\n    inputSchema: AnalyzeAudioForDistressInputSchema,\n    outputSchema: AnalyzeAudioForDistressOutputSchema,\n  },\n  async input => {\n    try {\n      const {output} = await analyzeAudioPrompt(input);\n      return output!;\n    } catch(e) {\n      console.error(\"Error analyzing audio: \", e);\n      // In case of an error from the LLM, assume no distress.\n      return { isDistress: false };\n    }\n  }\n);\n"],"names":[],"mappings":";;;;;;IA8BsB,0BAAA,WAAA,GAAA,CAAA,GAAA,sNAAA,CAAA,wBAAA,EAAA,8CAAA,sNAAA,CAAA,aAAA,EAAA,KAAA,GAAA,sNAAA,CAAA,mBAAA,EAAA","debugId":null}},
    {"offset": {"line": 1414, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/audio-visualizer.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useRef, useContext } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { AreaChart, Area, XAxis, YAxis, ResponsiveContainer, Tooltip } from 'recharts';\nimport { AlertCircle, Mic, Zap, ShieldOff } from 'lucide-react';\nimport type { AlertLevel } from '@/lib/types';\nimport { cn } from '@/lib/utils';\nimport { useToast } from '@/hooks/use-toast';\nimport { analyzeAudioForDistress } from '@/ai/flows/analyze-audio-for-distress';\nimport { AppContext } from '@/context/app-context';\n\nconst MAX_DATA_POINTS = 50;\nconst VOLUME_THRESHOLD = 25; // Average volume to trigger analysis\nconst PITCH_THRESHOLD = 2000; // Pitch in Hz to be considered a scream\nconst THREAT_COOLDOWN = 10000; // 10 seconds\n\ntype AudioDataPoint = {\n  time: number;\n  volume: number;\n  pitch: number;\n};\n\ninterface AudioVisualizerProps {\n  alertLevel: AlertLevel;\n  setAlertLevel: (level: AlertLevel) => void;\n}\n\nexport function AudioVisualizer({ alertLevel, setAlertLevel }: AudioVisualizerProps) {\n  const { isMonitoring } = useContext(AppContext);\n  const [audioData, setAudioData] = useState<AudioDataPoint[]>([]);\n  const [hasMicPermission, setHasMicPermission] = useState<boolean | null>(null);\n  const audioContextRef = useRef<AudioContext | null>(null);\n  const analyserRef = useRef<AnalyserNode | null>(null);\n  const streamRef = useRef<MediaStream | null>(null);\n  const animationFrameRef = useRef<number>();\n  const lastThreatTimeRef = useRef<number>(0);\n  const mediaRecorderRef = useRef<MediaRecorder | null>(null);\n  const audioChunksRef = useRef<Blob[]>([]);\n  const isAnalyzingRef = useRef<boolean>(false);\n\n  const { toast } = useToast();\n\n  const handleAudioAnalysis = async () => {\n    if (isAnalyzingRef.current || !mediaRecorderRef.current || mediaRecorderRef.current.state !== 'recording') {\n      return;\n    }\n    isAnalyzingRef.current = true;\n    \n    mediaRecorderRef.current.onstop = async () => {\n      const audioBlob = new Blob(audioChunksRef.current, { type: 'audio/webm' });\n      audioChunksRef.current = [];\n      \n      const reader = new FileReader();\n      reader.readAsDataURL(audioBlob);\n      reader.onloadend = async () => {\n        const base64Audio = reader.result as string;\n        try {\n          const { isDistress } = await analyzeAudioForDistress({ audioDataUri: base64Audio });\n          if (isDistress) {\n            const now = Date.now();\n            if (alertLevel !== 'EMERGENCY' && now - lastThreatTimeRef.current > THREAT_COOLDOWN) {\n              lastThreatTimeRef.current = now;\n              setAlertLevel('HIGH_RISK');\n            }\n          }\n        } catch(e) {\n            console.error(\"AI analysis failed: \", e);\n        } finally {\n            isAnalyzingRef.current = false;\n            // Restart recording only if the recorder is not already recording\n            if(isMonitoring && mediaRecorderRef.current && mediaRecorderRef.current.state === 'inactive') {\n              mediaRecorderRef.current.start();\n            }\n        }\n      };\n    };\n    \n    // Stop recording to trigger onstop\n    if (mediaRecorderRef.current.state === 'recording') {\n      mediaRecorderRef.current.stop();\n    }\n  };\n  \n  const stopAudioProcessing = () => {\n      if (animationFrameRef.current) {\n        cancelAnimationFrame(animationFrameRef.current);\n        animationFrameRef.current = undefined;\n      }\n      if(mediaRecorderRef.current && mediaRecorderRef.current.state === 'recording') {\n        mediaRecorderRef.current.stop();\n      }\n      mediaRecorderRef.current = null;\n      if (streamRef.current) {\n        streamRef.current.getTracks().forEach(track => track.stop());\n        streamRef.current = null;\n      }\n      if (audioContextRef.current && audioContextRef.current.state !== 'closed') {\n        audioContextRef.current.close();\n        audioContextRef.current = null;\n      }\n      setHasMicPermission(null);\n      setAudioData([]);\n  }\n\n\n  useEffect(() => {\n    const setupAudioProcessing = async () => {\n      if (!isMonitoring) {\n        stopAudioProcessing();\n        return;\n      }\n      \n      try {\n        const stream = await navigator.mediaDevices.getUserMedia({ audio: true });\n        streamRef.current = stream;\n        setHasMicPermission(true);\n\n        const context = new (window.AudioContext || (window as any).webkitAudioContext)();\n        audioContextRef.current = context;\n        const source = context.createMediaStreamSource(stream);\n        const analyser = context.createAnalyser();\n        analyser.fftSize = 2048;\n        source.connect(analyser);\n        analyserRef.current = analyser;\n\n        mediaRecorderRef.current = new MediaRecorder(stream, { mimeType: 'audio/webm' });\n        mediaRecorderRef.current.ondataavailable = (event) => {\n            if (event.data.size > 0) {\n              audioChunksRef.current.push(event.data);\n            }\n        };\n        mediaRecorderRef.current.start();\n\n        const dataArray = new Uint8Array(analyser.frequencyBinCount);\n        const timeDomainArray = new Uint8Array(analyser.fftSize);\n\n        const updateVisualization = () => {\n          if (analyserRef.current && audioContextRef.current) {\n            analyserRef.current.getByteFrequencyData(dataArray);\n            analyserRef.current.getByteTimeDomainData(timeDomainArray);\n            \n            let sum = 0;\n            for (let i = 0; i < timeDomainArray.length; i++) {\n              sum += Math.abs(timeDomainArray[i] - 128);\n            }\n            const averageVolume = sum / timeDomainArray.length;\n\n            let maxIndex = 0;\n            let maxVal = -1;\n            for (let i = 0; i < dataArray.length; i++) {\n                if(dataArray[i] > maxVal){\n                    maxVal = dataArray[i];\n                    maxIndex = i;\n                }\n            }\n            const dominantPitch = maxIndex * audioContextRef.current.sampleRate / analyserRef.current.fftSize;\n\n            const now = Date.now();\n            setAudioData(prevData => {\n              const newData = [...prevData, { time: now, volume: averageVolume, pitch: dominantPitch }];\n              return newData.length > MAX_DATA_POINTS ? newData.slice(newData.length - MAX_DATA_POINTS) : newData;\n            });\n            \n            if (\n              !isAnalyzingRef.current &&\n              alertLevel !== 'EMERGENCY' &&\n              dominantPitch > PITCH_THRESHOLD &&\n              averageVolume > VOLUME_THRESHOLD &&\n              (now - lastThreatTimeRef.current > THREAT_COOLDOWN)\n            ) {\n              lastThreatTimeRef.current = now;\n              handleAudioAnalysis();\n            }\n          }\n          animationFrameRef.current = requestAnimationFrame(updateVisualization);\n        };\n        updateVisualization();\n\n      } catch (error) {\n        console.error('Error accessing microphone:', error);\n        setHasMicPermission(false);\n        toast({\n          variant: 'destructive',\n          title: 'Microphone Access Denied',\n          description: 'Please enable microphone permissions for audio analysis.',\n        });\n      }\n    };\n\n    setupAudioProcessing();\n\n    return () => {\n      stopAudioProcessing();\n    };\n  // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [isMonitoring]);\n  \n  const getAlertColor = (level: AlertLevel) => {\n    switch (level) {\n        case 'NORMAL': return 'hsl(var(--status-normal))';\n        case 'LOW_RISK': return 'hsl(var(--status-low))';\n        case 'MEDIUM_RISK': return 'hsl(var(--status-medium))';\n        case 'HIGH_RISK': return 'hsl(var(--status-high))';\n        case 'EMERGENCY': return 'hsl(var(--status-emergency))';\n        default: return 'hsl(var(--status-normal))';\n    }\n  }\n\n  const alertColor = getAlertColor(alertLevel);\n  const lastPitch = audioData.length > 0 ? audioData[audioData.length - 1].pitch.toFixed(0) : 0;\n  const lastVolume = audioData.length > 0 ? audioData[audioData.length - 1].volume.toFixed(0) : 0;\n\n  return (\n    <Card className=\"border-secondary/20 bg-card shadow-md\">\n      <CardHeader className=\"flex flex-row justify-between items-start\">\n        <CardTitle className=\"font-headline text-lg flex items-center gap-2\"><Mic className=\"h-5 w-5\" /> Real-time Audio</CardTitle>\n        {isMonitoring && (\n            <div className=\"flex items-center gap-2 text-sm text-muted-foreground font-mono\">\n                <Zap className={cn(\"h-4 w-4 transition-colors\", +lastPitch > PITCH_THRESHOLD || +lastVolume > VOLUME_THRESHOLD ? \"text-status-high\" : \"text-muted-foreground\")} />\n                <span>{lastPitch} Hz</span>\n            </div>\n        )}\n      </CardHeader>\n      <CardContent>\n        {!isMonitoring ? (\n          <div className=\"flex flex-col items-center justify-center h-48 text-muted-foreground\">\n            <ShieldOff className=\"w-10 h-10 mb-2\" />\n            <p>Monitoring is turned off.</p>\n          </div>\n        ) : hasMicPermission === false ? (\n          <div className=\"flex flex-col items-center justify-center h-48 text-muted-foreground\">\n            <AlertCircle className=\"w-10 h-10 mb-2\" />\n            <p>Microphone access is required for audio analysis.</p>\n          </div>\n        ) : (\n          <div className=\"h-48\">\n            <ResponsiveContainer width=\"100%\" height=\"100%\">\n              <AreaChart data={audioData} margin={{ top: 5, right: 20, left: -10, bottom: 5 }}>\n                <defs>\n                  <linearGradient id=\"colorVolume\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"5%\" stopColor={alertColor} stopOpacity={0.8}/>\n                    <stop offset=\"95%\" stopColor={alertColor} stopOpacity={0}/>\n                  </linearGradient>\n                </defs>\n                <XAxis dataKey=\"time\" hide={true} />\n                <YAxis domain={[0, 60]} hide={true} />\n                <Tooltip\n                  contentStyle={{\n                    backgroundColor: 'hsl(var(--background))',\n                    borderColor: 'hsl(var(--border))',\n                    fontSize: '12px',\n                    borderRadius: 'var(--radius)',\n                  }}\n                  labelFormatter={() => ''}\n                  formatter={(value: number, name) => [value.toFixed(2), name.charAt(0).toUpperCase() + name.slice(1)]}\n                />\n                <Area type=\"monotone\" dataKey=\"volume\" stroke={alertColor} strokeWidth={2} fill=\"url(#colorVolume)\" />\n              </AreaChart>\n            </ResponsiveContainer>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAVA;;;;;;;;;;AAYA,MAAM,kBAAkB;AACxB,MAAM,mBAAmB,IAAI,qCAAqC;AAClE,MAAM,kBAAkB,MAAM,wCAAwC;AACtE,MAAM,kBAAkB,OAAO,aAAa;AAarC,SAAS,gBAAgB,EAAE,UAAU,EAAE,aAAa,EAAwB;IACjF,MAAM,EAAE,YAAY,EAAE,GAAG,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE,iIAAA,CAAA,aAAU;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAoB,EAAE;IAC/D,MAAM,CAAC,kBAAkB,oBAAoB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAkB;IACzE,MAAM,kBAAkB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAuB;IACpD,MAAM,cAAc,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAuB;IAChD,MAAM,YAAY,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAsB;IAC7C,MAAM,oBAAoB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD;IAC/B,MAAM,oBAAoB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAU;IACzC,MAAM,mBAAmB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAwB;IACtD,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAU,EAAE;IACxC,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAW;IAEvC,MAAM,EAAE,KAAK,EAAE,GAAG,CAAA,GAAA,4HAAA,CAAA,WAAQ,AAAD;IAEzB,MAAM,sBAAsB;QAC1B,IAAI,eAAe,OAAO,IAAI,CAAC,iBAAiB,OAAO,IAAI,iBAAiB,OAAO,CAAC,KAAK,KAAK,aAAa;YACzG;QACF;QACA,eAAe,OAAO,GAAG;QAEzB,iBAAiB,OAAO,CAAC,MAAM,GAAG;YAChC,MAAM,YAAY,IAAI,KAAK,eAAe,OAAO,EAAE;gBAAE,MAAM;YAAa;YACxE,eAAe,OAAO,GAAG,EAAE;YAE3B,MAAM,SAAS,IAAI;YACnB,OAAO,aAAa,CAAC;YACrB,OAAO,SAAS,GAAG;gBACjB,MAAM,cAAc,OAAO,MAAM;gBACjC,IAAI;oBACF,MAAM,EAAE,UAAU,EAAE,GAAG,MAAM,CAAA,GAAA,0JAAA,CAAA,0BAAuB,AAAD,EAAE;wBAAE,cAAc;oBAAY;oBACjF,IAAI,YAAY;wBACd,MAAM,MAAM,KAAK,GAAG;wBACpB,IAAI,eAAe,eAAe,MAAM,kBAAkB,OAAO,GAAG,iBAAiB;4BACnF,kBAAkB,OAAO,GAAG;4BAC5B,cAAc;wBAChB;oBACF;gBACF,EAAE,OAAM,GAAG;oBACP,QAAQ,KAAK,CAAC,wBAAwB;gBAC1C,SAAU;oBACN,eAAe,OAAO,GAAG;oBACzB,kEAAkE;oBAClE,IAAG,gBAAgB,iBAAiB,OAAO,IAAI,iBAAiB,OAAO,CAAC,KAAK,KAAK,YAAY;wBAC5F,iBAAiB,OAAO,CAAC,KAAK;oBAChC;gBACJ;YACF;QACF;QAEA,mCAAmC;QACnC,IAAI,iBAAiB,OAAO,CAAC,KAAK,KAAK,aAAa;YAClD,iBAAiB,OAAO,CAAC,IAAI;QAC/B;IACF;IAEA,MAAM,sBAAsB;QACxB,IAAI,kBAAkB,OAAO,EAAE;YAC7B,qBAAqB,kBAAkB,OAAO;YAC9C,kBAAkB,OAAO,GAAG;QAC9B;QACA,IAAG,iBAAiB,OAAO,IAAI,iBAAiB,OAAO,CAAC,KAAK,KAAK,aAAa;YAC7E,iBAAiB,OAAO,CAAC,IAAI;QAC/B;QACA,iBAAiB,OAAO,GAAG;QAC3B,IAAI,UAAU,OAAO,EAAE;YACrB,UAAU,OAAO,CAAC,SAAS,GAAG,OAAO,CAAC,CAAA,QAAS,MAAM,IAAI;YACzD,UAAU,OAAO,GAAG;QACtB;QACA,IAAI,gBAAgB,OAAO,IAAI,gBAAgB,OAAO,CAAC,KAAK,KAAK,UAAU;YACzE,gBAAgB,OAAO,CAAC,KAAK;YAC7B,gBAAgB,OAAO,GAAG;QAC5B;QACA,oBAAoB;QACpB,aAAa,EAAE;IACnB;IAGA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,uBAAuB;YAC3B,IAAI,CAAC,cAAc;gBACjB;gBACA;YACF;YAEA,IAAI;gBACF,MAAM,SAAS,MAAM,UAAU,YAAY,CAAC,YAAY,CAAC;oBAAE,OAAO;gBAAK;gBACvE,UAAU,OAAO,GAAG;gBACpB,oBAAoB;gBAEpB,MAAM,UAAU,IAAI,CAAC,OAAO,YAAY,IAAI,AAAC,OAAe,kBAAkB;gBAC9E,gBAAgB,OAAO,GAAG;gBAC1B,MAAM,SAAS,QAAQ,uBAAuB,CAAC;gBAC/C,MAAM,WAAW,QAAQ,cAAc;gBACvC,SAAS,OAAO,GAAG;gBACnB,OAAO,OAAO,CAAC;gBACf,YAAY,OAAO,GAAG;gBAEtB,iBAAiB,OAAO,GAAG,IAAI,cAAc,QAAQ;oBAAE,UAAU;gBAAa;gBAC9E,iBAAiB,OAAO,CAAC,eAAe,GAAG,CAAC;oBACxC,IAAI,MAAM,IAAI,CAAC,IAAI,GAAG,GAAG;wBACvB,eAAe,OAAO,CAAC,IAAI,CAAC,MAAM,IAAI;oBACxC;gBACJ;gBACA,iBAAiB,OAAO,CAAC,KAAK;gBAE9B,MAAM,YAAY,IAAI,WAAW,SAAS,iBAAiB;gBAC3D,MAAM,kBAAkB,IAAI,WAAW,SAAS,OAAO;gBAEvD,MAAM,sBAAsB;oBAC1B,IAAI,YAAY,OAAO,IAAI,gBAAgB,OAAO,EAAE;wBAClD,YAAY,OAAO,CAAC,oBAAoB,CAAC;wBACzC,YAAY,OAAO,CAAC,qBAAqB,CAAC;wBAE1C,IAAI,MAAM;wBACV,IAAK,IAAI,IAAI,GAAG,IAAI,gBAAgB,MAAM,EAAE,IAAK;4BAC/C,OAAO,KAAK,GAAG,CAAC,eAAe,CAAC,EAAE,GAAG;wBACvC;wBACA,MAAM,gBAAgB,MAAM,gBAAgB,MAAM;wBAElD,IAAI,WAAW;wBACf,IAAI,SAAS,CAAC;wBACd,IAAK,IAAI,IAAI,GAAG,IAAI,UAAU,MAAM,EAAE,IAAK;4BACvC,IAAG,SAAS,CAAC,EAAE,GAAG,QAAO;gCACrB,SAAS,SAAS,CAAC,EAAE;gCACrB,WAAW;4BACf;wBACJ;wBACA,MAAM,gBAAgB,WAAW,gBAAgB,OAAO,CAAC,UAAU,GAAG,YAAY,OAAO,CAAC,OAAO;wBAEjG,MAAM,MAAM,KAAK,GAAG;wBACpB,aAAa,CAAA;4BACX,MAAM,UAAU;mCAAI;gCAAU;oCAAE,MAAM;oCAAK,QAAQ;oCAAe,OAAO;gCAAc;6BAAE;4BACzF,OAAO,QAAQ,MAAM,GAAG,kBAAkB,QAAQ,KAAK,CAAC,QAAQ,MAAM,GAAG,mBAAmB;wBAC9F;wBAEA,IACE,CAAC,eAAe,OAAO,IACvB,eAAe,eACf,gBAAgB,mBAChB,gBAAgB,oBACf,MAAM,kBAAkB,OAAO,GAAG,iBACnC;4BACA,kBAAkB,OAAO,GAAG;4BAC5B;wBACF;oBACF;oBACA,kBAAkB,OAAO,GAAG,sBAAsB;gBACpD;gBACA;YAEF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,+BAA+B;gBAC7C,oBAAoB;gBACpB,MAAM;oBACJ,SAAS;oBACT,OAAO;oBACP,aAAa;gBACf;YACF;QACF;QAEA;QAEA,OAAO;YACL;QACF;IACF,uDAAuD;IACvD,GAAG;QAAC;KAAa;IAEjB,MAAM,gBAAgB,CAAC;QACrB,OAAQ;YACJ,KAAK;gBAAU,OAAO;YACtB,KAAK;gBAAY,OAAO;YACxB,KAAK;gBAAe,OAAO;YAC3B,KAAK;gBAAa,OAAO;YACzB,KAAK;gBAAa,OAAO;YACzB;gBAAS,OAAO;QACpB;IACF;IAEA,MAAM,aAAa,cAAc;IACjC,MAAM,YAAY,UAAU,MAAM,GAAG,IAAI,SAAS,CAAC,UAAU,MAAM,GAAG,EAAE,CAAC,KAAK,CAAC,OAAO,CAAC,KAAK;IAC5F,MAAM,aAAa,UAAU,MAAM,GAAG,IAAI,SAAS,CAAC,UAAU,MAAM,GAAG,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,KAAK;IAE9F,qBACE,8OAAC,gIAAA,CAAA,OAAI;QAAC,WAAU;;0BACd,8OAAC,gIAAA,CAAA,aAAU;gBAAC,WAAU;;kCACpB,8OAAC,gIAAA,CAAA,YAAS;wBAAC,WAAU;;0CAAgD,8OAAC,gMAAA,CAAA,MAAG;gCAAC,WAAU;;;;;;4BAAY;;;;;;;oBAC/F,8BACG,8OAAC;wBAAI,WAAU;;0CACX,8OAAC,gMAAA,CAAA,MAAG;gCAAC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,6BAA6B,CAAC,YAAY,mBAAmB,CAAC,aAAa,mBAAmB,qBAAqB;;;;;;0CACtI,8OAAC;;oCAAM;oCAAU;;;;;;;;;;;;;;;;;;;0BAI3B,8OAAC,gIAAA,CAAA,cAAW;0BACT,CAAC,6BACA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,gNAAA,CAAA,YAAS;4BAAC,WAAU;;;;;;sCACrB,8OAAC;sCAAE;;;;;;;;;;;2BAEH,qBAAqB,sBACvB,8OAAC;oBAAI,WAAU;;sCACb,8OAAC,oNAAA,CAAA,cAAW;4BAAC,WAAU;;;;;;sCACvB,8OAAC;sCAAE;;;;;;;;;;;yCAGL,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,mKAAA,CAAA,sBAAmB;wBAAC,OAAM;wBAAO,QAAO;kCACvC,cAAA,8OAAC,qJAAA,CAAA,YAAS;4BAAC,MAAM;4BAAW,QAAQ;gCAAE,KAAK;gCAAG,OAAO;gCAAI,MAAM,CAAC;gCAAI,QAAQ;4BAAE;;8CAC5E,8OAAC;8CACC,cAAA,8OAAC;wCAAe,IAAG;wCAAc,IAAG;wCAAI,IAAG;wCAAI,IAAG;wCAAI,IAAG;;0DACvD,8OAAC;gDAAK,QAAO;gDAAK,WAAW;gDAAY,aAAa;;;;;;0DACtD,8OAAC;gDAAK,QAAO;gDAAM,WAAW;gDAAY,aAAa;;;;;;;;;;;;;;;;;8CAG3D,8OAAC,qJAAA,CAAA,QAAK;oCAAC,SAAQ;oCAAO,MAAM;;;;;;8CAC5B,8OAAC,qJAAA,CAAA,QAAK;oCAAC,QAAQ;wCAAC;wCAAG;qCAAG;oCAAE,MAAM;;;;;;8CAC9B,8OAAC,uJAAA,CAAA,UAAO;oCACN,cAAc;wCACZ,iBAAiB;wCACjB,aAAa;wCACb,UAAU;wCACV,cAAc;oCAChB;oCACA,gBAAgB,IAAM;oCACtB,WAAW,CAAC,OAAe,OAAS;4CAAC,MAAM,OAAO,CAAC;4CAAI,KAAK,MAAM,CAAC,GAAG,WAAW,KAAK,KAAK,KAAK,CAAC;yCAAG;;;;;;8CAEtG,8OAAC,oJAAA,CAAA,OAAI;oCAAC,MAAK;oCAAW,SAAQ;oCAAS,QAAQ;oCAAY,aAAa;oCAAG,MAAK;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAQhG","debugId":null}},
    {"offset": {"line": 1859, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/alert-dialog.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n"],"names":[],"mappings":"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","debugId":null}},
    {"offset": {"line": 1986, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/threat-confirmation-dialog.tsx"],"sourcesContent":["'use client';\n\nimport {\n  AlertDialog,\n  AlertDialogAction,\n  AlertDialogCancel,\n  AlertDialogContent,\n  AlertDialogDescription,\n  AlertDialogFooter,\n  AlertDialogHeader,\n  AlertDialogTitle,\n} from '@/components/ui/alert-dialog';\nimport { Siren } from 'lucide-react';\nimport { Button } from '../ui/button';\n\ninterface ThreatConfirmationDialogProps {\n  open: boolean;\n  onConfirm: () => void;\n  onDismiss: () => void;\n}\n\nexport function ThreatConfirmationDialog({ open, onConfirm, onDismiss }: ThreatConfirmationDialogProps) {\n  return (\n    <AlertDialog open={open}>\n      <AlertDialogContent>\n        <AlertDialogHeader>\n          <AlertDialogTitle className=\"flex items-center gap-2\">\n            <Siren className=\"h-6 w-6 text-status-high\" />\n            Potential Threat Detected\n          </AlertDialogTitle>\n          <AlertDialogDescription>\n            Our system has detected a potential threat based on audio analysis. Please confirm if this is a real emergency.\n          </AlertDialogDescription>\n        </AlertDialogHeader>\n        <AlertDialogFooter>\n          <Button variant=\"outline\" onClick={onDismiss}>\n            False Alarm\n          </Button>\n          <Button variant=\"destructive\" onClick={onConfirm}>\n            Confirm Emergency\n          </Button>\n        </AlertDialogFooter>\n      </AlertDialogContent>\n    </AlertDialog>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AAUA;AACA;AAbA;;;;;AAqBO,SAAS,yBAAyB,EAAE,IAAI,EAAE,SAAS,EAAE,SAAS,EAAiC;IACpG,qBACE,8OAAC,2IAAA,CAAA,cAAW;QAAC,MAAM;kBACjB,cAAA,8OAAC,2IAAA,CAAA,qBAAkB;;8BACjB,8OAAC,2IAAA,CAAA,oBAAiB;;sCAChB,8OAAC,2IAAA,CAAA,mBAAgB;4BAAC,WAAU;;8CAC1B,8OAAC,oMAAA,CAAA,QAAK;oCAAC,WAAU;;;;;;gCAA6B;;;;;;;sCAGhD,8OAAC,2IAAA,CAAA,yBAAsB;sCAAC;;;;;;;;;;;;8BAI1B,8OAAC,2IAAA,CAAA,oBAAiB;;sCAChB,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAU,SAAS;sCAAW;;;;;;sCAG9C,8OAAC,kIAAA,CAAA,SAAM;4BAAC,SAAQ;4BAAc,SAAS;sCAAW;;;;;;;;;;;;;;;;;;;;;;;AAO5D","debugId":null}},
    {"offset": {"line": 2079, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/sheet.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n"],"names":[],"mappings":";;;;;;;;;;;;;AAEA;AACA;AACA;AACA;AAEA;AAPA;;;;;;;AASA,MAAM,QAAQ,kKAAA,CAAA,OAAmB;AAEjC,MAAM,eAAe,kKAAA,CAAA,UAAsB;AAE3C,MAAM,aAAa,kKAAA,CAAA,QAAoB;AAEvC,MAAM,cAAc,kKAAA,CAAA,SAAqB;AAEzC,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,UAAsB;QACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,2JACA;QAED,GAAG,KAAK;QACT,KAAK;;;;;;AAGT,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB,oMACA;IACE,UAAU;QACR,MAAM;YACJ,KAAK;YACL,QACE;YACF,MAAM;YACN,OACE;QACJ;IACF;IACA,iBAAiB;QACf,MAAM;IACR;AACF;AAOF,MAAM,6BAAe,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGlC,CAAC,EAAE,OAAO,OAAO,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO,EAAE,oBACpD,8OAAC;;0BACC,8OAAC;;;;;0BACD,8OAAC,kKAAA,CAAA,UAAsB;gBACrB,KAAK;gBACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,cAAc;oBAAE;gBAAK,IAAI;gBACtC,GAAG,KAAK;;oBAER;kCACD,8OAAC,kKAAA,CAAA,QAAoB;wBAAC,WAAU;;0CAC9B,8OAAC,4LAAA,CAAA,IAAC;gCAAC,WAAU;;;;;;0CACb,8OAAC;gCAAK,WAAU;0CAAU;;;;;;;;;;;;;;;;;;;;;;;;AAKlC,aAAa,WAAW,GAAG,kKAAA,CAAA,UAAsB,CAAC,WAAW;AAE7D,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,oDACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,cAAc,CAAC,EACnB,SAAS,EACT,GAAG,OACkC,iBACrC,8OAAC;QACC,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,iEACA;QAED,GAAG,KAAK;;;;;;AAGb,YAAY,WAAW,GAAG;AAE1B,MAAM,2BAAa,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGhC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,QAAoB;QACnB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,yCAAyC;QACtD,GAAG,KAAK;;;;;;AAGb,WAAW,WAAW,GAAG,kKAAA,CAAA,QAAoB,CAAC,WAAW;AAEzD,MAAM,iCAAmB,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAGtC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,cAA0B;QACzB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iCAAiC;QAC9C,GAAG,KAAK;;;;;;AAGb,iBAAiB,WAAW,GAAG,kKAAA,CAAA,cAA0B,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2228, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/nav-menu.tsx"],"sourcesContent":["'use client';\n\nimport { useContext } from 'react';\nimport { Button } from '@/components/ui/button';\nimport {\n  Sheet,\n  SheetContent,\n  SheetHeader,\n  SheetTitle,\n  SheetTrigger,\n} from '@/components/ui/sheet';\nimport { Menu, Settings, Phone, LayoutDashboard } from 'lucide-react';\nimport { AppContext } from '@/context/app-context';\n\nexport function NavMenu() {\n  const { activePage, setActivePage } = useContext(AppContext);\n\n  const navItems = [\n    { id: 'dashboard', label: 'Dashboard', icon: LayoutDashboard },\n    { id: 'settings', label: 'Settings', icon: Settings },\n    { id: 'helpline', label: 'Help Line', icon: Phone },\n  ];\n\n  return (\n    <>\n      {/* Desktop Menu */}\n      <nav className=\"hidden md:flex items-center gap-2\">\n        {navItems.map((item) => (\n          <Button\n            key={item.id}\n            variant={activePage === item.id ? 'secondary' : 'ghost'}\n            onClick={() => setActivePage(item.id as any)}\n            className=\"gap-2\"\n          >\n            <item.icon className=\"h-4 w-4\" />\n            {item.label}\n          </Button>\n        ))}\n      </nav>\n\n      {/* Mobile Menu */}\n      <div className=\"md:hidden\">\n        <Sheet>\n          <SheetTrigger asChild>\n            <Button variant=\"outline\" size=\"icon\">\n              <Menu className=\"h-5 w-5\" />\n              <span className=\"sr-only\">Open menu</span>\n            </Button>\n          </SheetTrigger>\n          <SheetContent>\n            <SheetHeader>\n              <SheetTitle>Menu</SheetTitle>\n            </SheetHeader>\n            <nav className=\"mt-8 flex flex-col gap-4\">\n              {navItems.map((item) => (\n                <Button\n                  key={item.id}\n                  variant={activePage === item.id ? 'secondary' : 'ghost'}\n                  onClick={() => setActivePage(item.id as any)}\n                  className=\"w-full justify-start gap-3 text-base p-6\"\n                >\n                  <item.icon className=\"h-5 w-5\" />\n                  {item.label}\n                </Button>\n              ))}\n            </nav>\n          </SheetContent>\n        </Sheet>\n      </div>\n    </>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAOA;AAAA;AAAA;AAAA;AACA;AAZA;;;;;;;AAcO,SAAS;IACd,MAAM,EAAE,UAAU,EAAE,aAAa,EAAE,GAAG,CAAA,GAAA,qMAAA,CAAA,aAAU,AAAD,EAAE,iIAAA,CAAA,aAAU;IAE3D,MAAM,WAAW;QACf;YAAE,IAAI;YAAa,OAAO;YAAa,MAAM,4NAAA,CAAA,kBAAe;QAAC;QAC7D;YAAE,IAAI;YAAY,OAAO;YAAY,MAAM,0MAAA,CAAA,WAAQ;QAAC;QACpD;YAAE,IAAI;YAAY,OAAO;YAAa,MAAM,oMAAA,CAAA,QAAK;QAAC;KACnD;IAED,qBACE;;0BAEE,8OAAC;gBAAI,WAAU;0BACZ,SAAS,GAAG,CAAC,CAAC,qBACb,8OAAC,kIAAA,CAAA,SAAM;wBAEL,SAAS,eAAe,KAAK,EAAE,GAAG,cAAc;wBAChD,SAAS,IAAM,cAAc,KAAK,EAAE;wBACpC,WAAU;;0CAEV,8OAAC,KAAK,IAAI;gCAAC,WAAU;;;;;;4BACpB,KAAK,KAAK;;uBANN,KAAK,EAAE;;;;;;;;;;0BAYlB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC,iIAAA,CAAA,QAAK;;sCACJ,8OAAC,iIAAA,CAAA,eAAY;4BAAC,OAAO;sCACnB,cAAA,8OAAC,kIAAA,CAAA,SAAM;gCAAC,SAAQ;gCAAU,MAAK;;kDAC7B,8OAAC,kMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;kDAChB,8OAAC;wCAAK,WAAU;kDAAU;;;;;;;;;;;;;;;;;sCAG9B,8OAAC,iIAAA,CAAA,eAAY;;8CACX,8OAAC,iIAAA,CAAA,cAAW;8CACV,cAAA,8OAAC,iIAAA,CAAA,aAAU;kDAAC;;;;;;;;;;;8CAEd,8OAAC;oCAAI,WAAU;8CACZ,SAAS,GAAG,CAAC,CAAC,qBACb,8OAAC,kIAAA,CAAA,SAAM;4CAEL,SAAS,eAAe,KAAK,EAAE,GAAG,cAAc;4CAChD,SAAS,IAAM,cAAc,KAAK,EAAE;4CACpC,WAAU;;8DAEV,8OAAC,KAAK,IAAI;oDAAC,WAAU;;;;;;gDACpB,KAAK,KAAK;;2CANN,KAAK,EAAE;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAe9B","debugId":null}},
    {"offset": {"line": 2397, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/label.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAEA;AANA;;;;;;AAQA,MAAM,gBAAgB,CAAA,GAAA,gKAAA,CAAA,MAAG,AAAD,EACtB;AAGF,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAI3B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,iKAAA,CAAA,OAAmB;QAClB,KAAK;QACL,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EAAE,iBAAiB;QAC9B,GAAG,KAAK;;;;;;AAGb,MAAM,WAAW,GAAG,iKAAA,CAAA,OAAmB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2429, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/switch.tsx"],"sourcesContent":["\"use client\"\n\nimport * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n"],"names":[],"mappings":";;;;AAEA;AACA;AAEA;AALA;;;;;AAOA,MAAM,uBAAS,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAG5B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBAC1B,8OAAC,kKAAA,CAAA,OAAqB;QACpB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,sXACA;QAED,GAAG,KAAK;QACT,KAAK;kBAEL,cAAA,8OAAC,kKAAA,CAAA,QAAsB;YACrB,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV;;;;;;;;;;;AAKR,OAAO,WAAW,GAAG,kKAAA,CAAA,OAAqB,CAAC,WAAW","debugId":null}},
    {"offset": {"line": 2465, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AAEA,MAAM,sBAAQ,CAAA,GAAA,qMAAA,CAAA,aAAgB,AAAD,EAC3B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,8OAAC;QACC,MAAM;QACN,WAAW,CAAA,GAAA,mHAAA,CAAA,KAAE,AAAD,EACV,kYACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;AAEF,MAAM,WAAW,GAAG","debugId":null}},
    {"offset": {"line": 2494, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/settings.tsx"],"sourcesContent":["'use client';\n\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { Input } from '@/components/ui/input';\nimport { Button } from '@/components/ui/button';\nimport { User, Bell, Phone } from 'lucide-react';\n\nexport function Settings() {\n  return (\n    <div className=\"space-y-8\">\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\"><User className=\"h-5 w-5\"/> Profile Settings</CardTitle>\n          <CardDescription>Manage your personal information.</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"name\">Name</Label>\n            <Input id=\"name\" placeholder=\"John Doe\" />\n          </div>\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"email\">Email</Label>\n            <Input id=\"email\" type=\"email\" placeholder=\"john.doe@example.com\" />\n          </div>\n          <Button>Save Changes</Button>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\"><Bell className=\"h-5 w-5\"/> Notification Settings</CardTitle>\n          <CardDescription>Customize how you receive alerts.</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <div className=\"flex items-center justify-between rounded-lg border p-3 shadow-sm\">\n            <div className=\"space-y-0.5\">\n              <Label>Push Notifications</Label>\n              <p className=\"text-xs text-muted-foreground\">Receive alerts on your device.</p>\n            </div>\n            <Switch defaultChecked/>\n          </div>\n          <div className=\"flex items-center justify-between rounded-lg border p-3 shadow-sm\">\n            <div className=\"space-y-0.5\">\n              <Label>Email Notifications</Label>\n               <p className=\"text-xs text-muted-foreground\">Receive alerts via email.</p>\n            </div>\n            <Switch />\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\"><Phone className=\"h-5 w-5\"/> Emergency Contacts</CardTitle>\n          <CardDescription>Add or remove emergency contacts.</CardDescription>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"contact-name\">Contact Name</Label>\n                <Input id=\"contact-name\" placeholder=\"Jane Doe\" />\n            </div>\n            <div className=\"space-y-2\">\n                <Label htmlFor=\"contact-phone\">Contact Phone</Label>\n                <Input id=\"contact-phone\" type=\"tel\" placeholder=\"+1 (555) 123-4567\" />\n            </div>\n            <Button>Add Contact</Button>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAPA;;;;;;;;AASO,SAAS;IACd,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC,gIAAA,CAAA,OAAI;;kCACH,8OAAC,gIAAA,CAAA,aAAU;;0CACT,8OAAC,gIAAA,CAAA,YAAS;gCAAC,WAAU;;kDAA0B,8OAAC,kMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;oCAAW;;;;;;;0CAC1E,8OAAC,gIAAA,CAAA,kBAAe;0CAAC;;;;;;;;;;;;kCAEnB,8OAAC,gIAAA,CAAA,cAAW;wBAAC,WAAU;;0CACrB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,iIAAA,CAAA,QAAK;wCAAC,SAAQ;kDAAO;;;;;;kDACtB,8OAAC,iIAAA,CAAA,QAAK;wCAAC,IAAG;wCAAO,aAAY;;;;;;;;;;;;0CAE/B,8OAAC;gCAAI,WAAU;;kDACb,8OAAC,iIAAA,CAAA,QAAK;wCAAC,SAAQ;kDAAQ;;;;;;kDACvB,8OAAC,iIAAA,CAAA,QAAK;wCAAC,IAAG;wCAAQ,MAAK;wCAAQ,aAAY;;;;;;;;;;;;0CAE7C,8OAAC,kIAAA,CAAA,SAAM;0CAAC;;;;;;;;;;;;;;;;;;0BAIZ,8OAAC,gIAAA,CAAA,OAAI;;kCACH,8OAAC,gIAAA,CAAA,aAAU;;0CACT,8OAAC,gIAAA,CAAA,YAAS;gCAAC,WAAU;;kDAA0B,8OAAC,kMAAA,CAAA,OAAI;wCAAC,WAAU;;;;;;oCAAW;;;;;;;0CAC1E,8OAAC,gIAAA,CAAA,kBAAe;0CAAC;;;;;;;;;;;;kCAEnB,8OAAC,gIAAA,CAAA,cAAW;wBAAC,WAAU;;0CACrB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,iIAAA,CAAA,QAAK;0DAAC;;;;;;0DACP,8OAAC;gDAAE,WAAU;0DAAgC;;;;;;;;;;;;kDAE/C,8OAAC,kIAAA,CAAA,SAAM;wCAAC,cAAc;;;;;;;;;;;;0CAExB,8OAAC;gCAAI,WAAU;;kDACb,8OAAC;wCAAI,WAAU;;0DACb,8OAAC,iIAAA,CAAA,QAAK;0DAAC;;;;;;0DACN,8OAAC;gDAAE,WAAU;0DAAgC;;;;;;;;;;;;kDAEhD,8OAAC,kIAAA,CAAA,SAAM;;;;;;;;;;;;;;;;;;;;;;;0BAKb,8OAAC,gIAAA,CAAA,OAAI;;kCACH,8OAAC,gIAAA,CAAA,aAAU;;0CACT,8OAAC,gIAAA,CAAA,YAAS;gCAAC,WAAU;;kDAA0B,8OAAC,oMAAA,CAAA,QAAK;wCAAC,WAAU;;;;;;oCAAW;;;;;;;0CAC3E,8OAAC,gIAAA,CAAA,kBAAe;0CAAC;;;;;;;;;;;;kCAEnB,8OAAC,gIAAA,CAAA,cAAW;wBAAC,WAAU;;0CACnB,8OAAC;gCAAI,WAAU;;kDACX,8OAAC,iIAAA,CAAA,QAAK;wCAAC,SAAQ;kDAAe;;;;;;kDAC9B,8OAAC,iIAAA,CAAA,QAAK;wCAAC,IAAG;wCAAe,aAAY;;;;;;;;;;;;0CAEzC,8OAAC;gCAAI,WAAU;;kDACX,8OAAC,iIAAA,CAAA,QAAK;wCAAC,SAAQ;kDAAgB;;;;;;kDAC/B,8OAAC,iIAAA,CAAA,QAAK;wCAAC,IAAG;wCAAgB,MAAK;wCAAM,aAAY;;;;;;;;;;;;0CAErD,8OAAC,kIAAA,CAAA,SAAM;0CAAC;;;;;;;;;;;;;;;;;;;;;;;;AAKpB","debugId":null}},
    {"offset": {"line": 2872, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/components/dashboard/helpline.tsx"],"sourcesContent":["'use client';\n\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { PhoneOutgoing } from 'lucide-react';\n\nconst helpLines = [\n    { name: 'National Emergency Number', number: '911', country: 'USA/Canada' },\n    { name: 'National Suicide Prevention Lifeline', number: '988', country: 'USA' },\n    { name: 'Emergency Medical Services', number: '112', country: 'EU' },\n    { name: 'Police', number: '100', country: 'India' },\n]\n\nexport function HelpLine() {\n  return (\n    <Card>\n      <CardHeader>\n        <CardTitle>Emergency Help Lines</CardTitle>\n        <CardDescription>Quick access to emergency services.</CardDescription>\n      </CardHeader>\n      <CardContent className=\"grid gap-4\">\n        {helpLines.map(line => (\n            <div key={line.name} className=\"flex items-center justify-between rounded-lg border p-4 shadow-sm\">\n                <div>\n                    <p className=\"font-semibold\">{line.name} <span className=\"text-xs text-muted-foreground\">({line.country})</span></p>\n                    <p className=\"text-lg font-mono font-bold text-primary\">{line.number}</p>\n                </div>\n                <Button asChild size=\"icon\" variant=\"outline\">\n                    <a href={`tel:${line.number}`}>\n                        <PhoneOutgoing className=\"h-5 w-5\" />\n                        <span className=\"sr-only\">Call {line.name}</span>\n                    </a>\n                </Button>\n            </div>\n        ))}\n      </CardContent>\n    </Card>\n  );\n}\n"],"names":[],"mappings":";;;;AAEA;AACA;AACA;AAJA;;;;;AAMA,MAAM,YAAY;IACd;QAAE,MAAM;QAA6B,QAAQ;QAAO,SAAS;IAAa;IAC1E;QAAE,MAAM;QAAwC,QAAQ;QAAO,SAAS;IAAM;IAC9E;QAAE,MAAM;QAA8B,QAAQ;QAAO,SAAS;IAAK;IACnE;QAAE,MAAM;QAAU,QAAQ;QAAO,SAAS;IAAQ;CACrD;AAEM,SAAS;IACd,qBACE,8OAAC,gIAAA,CAAA,OAAI;;0BACH,8OAAC,gIAAA,CAAA,aAAU;;kCACT,8OAAC,gIAAA,CAAA,YAAS;kCAAC;;;;;;kCACX,8OAAC,gIAAA,CAAA,kBAAe;kCAAC;;;;;;;;;;;;0BAEnB,8OAAC,gIAAA,CAAA,cAAW;gBAAC,WAAU;0BACpB,UAAU,GAAG,CAAC,CAAA,qBACX,8OAAC;wBAAoB,WAAU;;0CAC3B,8OAAC;;kDACG,8OAAC;wCAAE,WAAU;;4CAAiB,KAAK,IAAI;4CAAC;0DAAC,8OAAC;gDAAK,WAAU;;oDAAgC;oDAAE,KAAK,OAAO;oDAAC;;;;;;;;;;;;;kDACxG,8OAAC;wCAAE,WAAU;kDAA4C,KAAK,MAAM;;;;;;;;;;;;0CAExE,8OAAC,kIAAA,CAAA,SAAM;gCAAC,OAAO;gCAAC,MAAK;gCAAO,SAAQ;0CAChC,cAAA,8OAAC;oCAAE,MAAM,CAAC,IAAI,EAAE,KAAK,MAAM,EAAE;;sDACzB,8OAAC,wNAAA,CAAA,gBAAa;4CAAC,WAAU;;;;;;sDACzB,8OAAC;4CAAK,WAAU;;gDAAU;gDAAM,KAAK,IAAI;;;;;;;;;;;;;;;;;;;uBAR3C,KAAK,IAAI;;;;;;;;;;;;;;;;AAgB/B","debugId":null}},
    {"offset": {"line": 3035, "column": 0}, "map": {"version":3,"sources":["file:///home/user/studio/src/app/page.tsx"],"sourcesContent":["'use client';\n\nimport { useState, useEffect, useContext } from 'react';\nimport type { AlertLevel } from '@/lib/types';\nimport { StatusPanel } from '@/components/dashboard/status-panel';\nimport { SensorStatus } from '@/components/dashboard/sensor-status';\nimport { RiskAssessment } from '@/components/dashboard/risk-assessment';\nimport { EmergencyPanel } from '@/components/dashboard/emergency-panel';\nimport { CameraFeed } from '@/components/dashboard/camera-feed';\nimport { AudioVisualizer } from '@/components/dashboard/audio-visualizer';\nimport { ThreatConfirmationDialog } from '@/components/dashboard/threat-confirmation-dialog';\nimport { NavMenu } from '@/components/dashboard/nav-menu';\nimport { AppContext } from '@/context/app-context';\nimport { Settings } from '@/components/dashboard/settings';\nimport { HelpLine } from '@/components/dashboard/helpline';\nimport { Switch } from '@/components/ui/switch';\nimport { Label } from '@/components/ui/label';\n\nexport default function Home() {\n  const { activePage, isMonitoring, toggleMonitoring } = useContext(AppContext);\n  const [alertLevel, setAlertLevel] = useState<AlertLevel>('NORMAL');\n  const [currentYear, setCurrentYear] = useState(new Date().getFullYear());\n  const [showConfirmation, setShowConfirmation] = useState(false);\n\n  useEffect(() => {\n    setCurrentYear(new Date().getFullYear());\n  }, []);\n\n  useEffect(() => {\n    if (alertLevel === 'HIGH_RISK') {\n      setShowConfirmation(true);\n    }\n  }, [alertLevel]);\n  \n  useEffect(() => {\n    if (!isMonitoring) {\n      setAlertLevel('NORMAL');\n    }\n  }, [isMonitoring])\n\n  const handleManualTrigger = () => {\n    setAlertLevel('EMERGENCY');\n  };\n  \n  const handleConfirmation = (isEmergency: boolean) => {\n    if (isEmergency) {\n      setAlertLevel('EMERGENCY');\n    } else {\n      setAlertLevel('NORMAL');\n    }\n    setShowConfirmation(false);\n  }\n\n  const renderContent = () => {\n    switch(activePage) {\n      case 'dashboard':\n        return (\n          <>\n            <StatusPanel alertLevel={alertLevel} />\n            <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-6\">\n              <div className=\"lg:col-span-2 space-y-6\">\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n                  <CameraFeed alertLevel={alertLevel} setAlertLevel={setAlertLevel} />\n                  <AudioVisualizer alertLevel={alertLevel} setAlertLevel={setAlertLevel}/>\n                </div>\n                <SensorStatus alertLevel={alertLevel} />\n              </div>\n              <div className=\"lg:col-span-1 flex flex-col gap-6\">\n                <RiskAssessment alertLevel={alertLevel} setAlertLevel={setAlertLevel} />\n              </div>\n            </div>\n            <EmergencyPanel alertLevel={alertLevel} onManualTrigger={handleManualTrigger} />\n          </>\n        );\n      case 'settings':\n        return <Settings />;\n      case 'helpline':\n        return <HelpLine />;\n      default:\n        return null;\n    }\n  }\n\n  return (\n    <div className=\"flex min-h-screen w-full flex-col\">\n      <header className=\"sticky top-0 z-30 flex h-16 shrink-0 items-center justify-between gap-4 border-b bg-background/80 px-4 backdrop-blur-lg md:px-6\">\n        <h1 className=\"font-headline text-xl font-bold md:text-2xl\">SafeCity</h1>\n        <div className=\"flex items-center gap-4\">\n            <div className=\"flex items-center gap-2\">\n                <Switch id=\"monitoring-switch\" checked={isMonitoring} onCheckedChange={toggleMonitoring} />\n                <Label htmlFor=\"monitoring-switch\" className=\"hidden sm:inline-block text-sm font-medium\">Monitoring</Label>\n            </div>\n            <span className=\"rounded-full bg-primary px-3 py-1 text-xs font-medium text-primary-foreground hidden sm:inline-block\">v1.0</span>\n            <NavMenu />\n        </div>\n      </header>\n      <main className=\"flex-1 p-4 md:p-6 lg:p-8\">\n        <div className=\"mx-auto grid max-w-7xl items-start gap-6\">\n          {renderContent()}\n        </div>\n      </main>\n      <footer className=\"mt-auto shrink-0 border-t px-4 py-4 md:px-6\">\n        <div className=\"mx-auto flex max-w-7xl items-center justify-between text-sm text-muted-foreground\">\n            <p>&copy; {currentYear} SafeCity. All rights reserved.</p>\n            <p className=\"font-headline hidden sm:block\">Your Personal Guardian</p>\n        </div>\n      </footer>\n      <ThreatConfirmationDialog \n        open={showConfirmation}\n        onConfirm={() => handleConfirmation(true)}\n        onDismiss={() => handleConfirmation(false)}\n      />\n    </div>\n  );\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}